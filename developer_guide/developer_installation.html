
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Development setup &#8212; SMPTE VC-2 Conformance Software v0.4.4 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="vc2_conformance internals overview" href="overview.html" />
    <link rel="prev" title="Conformance software development guide" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="overview.html" title="vc2_conformance internals overview"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Conformance software development guide"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">SMPTE VC-2 Conformance Software v0.4.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Conformance software development guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Development setup</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="development-setup">
<h1>Development setup<a class="headerlink" href="#development-setup" title="Permalink to this headline">¶</a></h1>
<p>The following instructions outline the process for setting up a development
environment for the VC-2 conformance software and the procedures for running
tests and generating documentation.</p>
<div class="section" id="checking-out-repositories">
<h2>Checking out repositories<a class="headerlink" href="#checking-out-repositories" title="Permalink to this headline">¶</a></h2>
<p>The VC-2 conformance software is split across in the following <a class="reference external" href="https://git-scm.com/">Git</a> repositories, each containing a Python package of the
same name:</p>
<dl class="simple">
<dt><a class="reference external" href="https://github.com/bbc/vc2_conformance">https://github.com/bbc/vc2_conformance</a> (<a class="reference internal" href="overview.html#module-vc2_conformance" title="vc2_conformance"><code class="xref py py-mod docutils literal notranslate"><span class="pre">vc2_conformance</span></code></a>)</dt><dd><p>The main conformance software repository on which this documentation
focuses.</p>
</dd>
<dt><a class="reference external" href="https://github.com/bbc/vc2_conformance_data">https://github.com/bbc/vc2_conformance_data</a> (<a class="reference external" href="https://bbc.github.io/vc2_conformance_data/index.html#module-vc2_conformance_data" title="(in Data Files for SMPTE VC-2 Conformance Testing v1.0.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">vc2_conformance_data</span></code></a>)</dt><dd><p>Data files (e.g. test pictures) used in the conformance testing process.</p>
</dd>
<dt><a class="reference external" href="https://github.com/bbc/vc2_data_tables">https://github.com/bbc/vc2_data_tables</a> (<a class="reference external" href="https://bbc.github.io/vc2_data_tables/api.html#module-vc2_data_tables" title="(in SMPTE ST 2042-1 (VC-2) Data Tables v1.0.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">vc2_data_tables</span></code></a>)</dt><dd><p>Data tables and constant definitions from the VC-2 standard.</p>
</dd>
<dt><a class="reference external" href="https://github.com/bbc/vc2_bit_widths">https://github.com/bbc/vc2_bit_widths</a> (<a class="reference external" href="https://bbc.github.io/vc2_bit_widths/high_level_api/index.html#module-vc2_bit_widths" title="(in SMPTE ST 2042-1 (VC-2) Bit Widths v1.0.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">vc2_bit_widths</span></code></a>)</dt><dd><p>Mathematical routines for computing near worst case signals for VC-2
codecs.</p>
</dd>
</dl>
<p>The above repositories should be cloned into local directories, e.g. using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone git@github.com:bbc/vc2_conformance.git
$ git clone git@github.com:bbc/vc2_conformance_data.git
$ git clone git@github.com:bbc/vc2_data_tables.git
$ git clone git@github.com:bbc/vc2_bit_widths.git
</pre></div>
</div>
<p><a class="reference external" href="https://pre-commit.com/">Pre-commit hooks</a> are used to enforce certain code
standards in these repositories. These should be installed as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ # For each cloned repository...
$ cd path/to/repo/
$ pre-commit install
</pre></div>
</div>
</div>
<div class="section" id="virtual-environment">
<h2>Virtual environment<a class="headerlink" href="#virtual-environment" title="Permalink to this headline">¶</a></h2>
<p>It is strongly recommended that development is carried out in a <a class="reference external" href="https://virtualenv.pypa.io/en/stable/">Python virtual
environment</a> (see warning below). This
can be setup using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -m virtualenv --python &lt;PYTHON INTERPRETER&gt; venv
</pre></div>
</div>
<p>This will create a virtual environment in the directory <code class="docutils literal notranslate"><span class="pre">venv</span></code> which uses the
python interpreter <code class="docutils literal notranslate"><span class="pre">&lt;PYTHON</span> <span class="pre">INTERPRETER&gt;</span></code>, which should generally be one of
<code class="docutils literal notranslate"><span class="pre">python2</span></code> or <code class="docutils literal notranslate"><span class="pre">python3</span></code>.</p>
<p>Once created, the virtual environment must be activated in any shell you use
using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ source venv/bin/activate
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Python virtual environment provides an isolated environment in which
packages may be installed without impacting on the rest of the system.
Once activated, the <code class="docutils literal notranslate"><span class="pre">python</span></code> and <code class="docutils literal notranslate"><span class="pre">pip</span></code> commands will use the python
version and packages setup within the virtual environment.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When working outside a virtual environment, Python packages included by
some operating systems (e.g. Ubuntu) can be very out of date leading to
problems during development. This is the result of certain development
dependencies not correctly specifiying their version requirements and is
outside of our control. By using a virtual environment, up-to-date versions
of all dependencies will be installed which avoids these problems.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The VC-2 conformance software itself <em>does</em> correctly specify its
dependencies so these problems only apply during development and should
not affect end users.</p>
</div>
</div>
</div>
<div class="section" id="development-installation">
<h2>Development installation<a class="headerlink" href="#development-installation" title="Permalink to this headline">¶</a></h2>
<p>A development installation of the conformance software may be performed
directly from each of the cloned repositories as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ # Each repo should be installed as follows, in the following order:
$ # * vc2_data_tables
$ # * vc2_bit_widths
$ # * vc2_conformance_data
$ # * vc2_conformance
$ cd path/to/repo/

$ # Install in editable/development mode (so edits take effect immediately)
$ pip install -e .

$ # Install test suite dependencies
$ pip install -r requirements-test.txt

$ # Install documentation building dependencies (not present for all
$ # repositories)
$ pip install -r requirements-docs.txt
</pre></div>
</div>
<p>After installation, the various <code class="docutils literal notranslate"><span class="pre">vc2-*</span></code> commands will be made available in
your <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> and the various <code class="docutils literal notranslate"><span class="pre">vc2_*</span></code> Python modules in your
<code class="docutils literal notranslate"><span class="pre">$PYTHONPATH</span></code>.  These will point directly to the cloned source code and so
changes will take effect immediately.</p>
</div>
<div class="section" id="running-tests">
<h2>Running tests<a class="headerlink" href="#running-tests" title="Permalink to this headline">¶</a></h2>
<p>Test routines relating to the code in each repository can be found in the
<code class="docutils literal notranslate"><span class="pre">tests/</span></code> directory of each repository. The test suites are built on <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a> and, once a development install has been
completed, may be executed as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ py.test path/to/vc2_data_tables/tests/
$ py.test path/to/vc2_bit_widths/tests/
$ py.test path/to/vc2_conformance_data/tests/
$ py.test path/to/vc2_conformance/tests/
</pre></div>
</div>
</div>
<div class="section" id="building-documentation">
<h2>Building documentation<a class="headerlink" href="#building-documentation" title="Permalink to this headline">¶</a></h2>
<p>HTML documentation (including the documentation you’re reading now) is built as
follows (after a development install has been performed):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make -C path/to/vc2_data_tables/docs html
$ make -C path/to/vc2_bit_widths/docs html
$ make -C path/to/vc2_conformance_data/docs html
$ make -C path/to/vc2_conformance/docs html
</pre></div>
</div>
<p>HTML documentation will be written to the <code class="docutils literal notranslate"><span class="pre">docs/build/html/</span></code> directory (open
the <code class="docutils literal notranslate"><span class="pre">index.html</span></code> file in a web browser to read it).</p>
<p>Alternatively, PDF documentation can be built by replacing <code class="docutils literal notranslate"><span class="pre">html</span></code> with
<code class="docutils literal notranslate"><span class="pre">latexpdf</span></code> in the above commands. This will require a working installation of
<a class="reference external" href="https://www.latex-project.org/">LaTeX</a> and <a class="reference external" href="https://inkscape.org/">Inkscape</a> to build. In addition, for cross-references between
PDFs to be created correctly, the documentation must be built within the Python
virtual environment where the various <code class="docutils literal notranslate"><span class="pre">vc2_*</span></code> Python packages are installed
in development/editable mode.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Development setup</a><ul>
<li><a class="reference internal" href="#checking-out-repositories">Checking out repositories</a></li>
<li><a class="reference internal" href="#virtual-environment">Virtual environment</a></li>
<li><a class="reference internal" href="#development-installation">Development installation</a></li>
<li><a class="reference internal" href="#running-tests">Running tests</a></li>
<li><a class="reference internal" href="#building-documentation">Building documentation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Conformance software development guide</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="overview.html"
                        title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">vc2_conformance</span></code> internals overview</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/developer_guide/developer_installation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="overview.html" title="vc2_conformance internals overview"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Conformance software development guide"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">SMPTE VC-2 Conformance Software v0.4.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Conformance software development guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Development setup</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, BBC.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.3.
    </div>
  </body>
</html>